{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/class/Circle.js","src/class/Game.js","src/class/Geometry.js","src/class/Point.js","src/class/Sprite.js","src/class/Tile.js","src/class/Vector.js","src/class/jcvPhysics.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Circle","x","y","radius","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","classType","line","b","c","d","u1","u2","ret","retP1","retP2","v1","v2","p2","p1","Math","sqrt","isNaN","object","distanceTo","inteceptLineSeg","Game","containerId","canvas","document","createElement","container","getElementById","appendChild","context","getContext","window","addEventListener","resize","bind","draws","requestAnimationFrame","gameloop","clearRect","getWidth","getHeight","draw","id","width","height","clientWidth","clientHeight","Geometry","round","Point","speed","targetPosition","vec","Vector","getLength","setLength","translate","p","atan2","dx","dy","p3","strict","b1","b2","b3","signTo","Sprite","url","urlImage","ext","substr","lastIndexOf","content","animations","default","frames","loop","playing","countFrames","position","current","iteration","inverse","velocity","_Vector2","loadJson","addFrame","maxWidth","maxHeight","minOffsetX","minOffsetY","name","ctx","ready","save","scale","drawImage","img","offsetX","offsetY","restore","add","fetch","then","res","json","keys","frame","w","h","spriteSourceSize","srcX","srcY","srcWidth","srcHeight","Image","onload","src","Tile","pattern","createPattern","fillStyle","fillRect","update","angle","getAngle","cos","sin","_Geometry2","_Point2","_Circle2","_Sprite2","_Tile2","_Game2"],"mappings":"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","file":"jcvPhysics.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Point from './Point'; \r\n\r\nexport default class Circle extends Point {\r\n    \r\n    constructor(x,y,radius){\r\n        super(x,y);\r\n        this.radius = radius;\r\n        this.classType = \"Circle\";\r\n    }\r\n        inteceptLineSeg(line) {\r\n        var a, b, c, d, u1, u2, ret, retP1, retP2, v1, v2;\r\n        v1 = {};\r\n        v2 = {};\r\n        v1.x = line.p2.x - line.p1.x;\r\n        v1.y = line.p2.y - line.p1.y;\r\n        v2.x = line.p1.x - this.x;\r\n        v2.y = line.p1.y - this.y;\r\n        b = (v1.x * v2.x + v1.y * v2.y);\r\n        c = 2 * (v1.x * v1.x + v1.y * v1.y);\r\n        b *= -2;\r\n        d = Math.sqrt(b * b - 2 * c * (v2.x * v2.x + v2.y * v2.y - this.radius * this.radius));\r\n        if (isNaN(d)) { // no intercept\r\n            return false;\r\n        }\r\n        u1 = (b - d) / c;  // these represent the unit distance of point one and two on the line\r\n        u2 = (b + d) / c;\r\n        retP1 = {};   // return points\r\n        retP2 = {}\r\n        ret = []; // return array\r\n        if (u1 <= 1 && u1 >= 0) {  // add point if on the line segment\r\n            retP1.x = line.p1.x + v1.x * u1;\r\n            retP1.y = line.p1.y + v1.y * u1;\r\n            ret[0] = retP1;\r\n        }\r\n        if (u2 <= 1 && u2 >= 0) {  // second add point if on the line segment\r\n            retP2.x = line.p1.x + v1.x * u2;\r\n            retP2.y = line.p1.y + v1.y * u2;\r\n            ret[ret.length] = retP2;\r\n        }\r\n        return ret;\r\n    }\r\n    collisionTo(object) {\r\n        if (object.classType == \"Point\") {\r\n            return this.distanceTo(object) <= this.radius + object.radius;\r\n        } else if (object.classType == \"Segment\") {\r\n            return this.inteceptLineSeg(object);\r\n        }\r\n    }\r\n}\r\n","export default class Game  {\r\n    constructor(containerId) {\r\n        this.canvas = document.createElement('canvas');\r\n        this.container = document.getElementById(containerId);\r\n        this.container.appendChild(this.canvas);\r\n        this.context = this.canvas.getContext('2d');\r\n        window.addEventListener('resize', this.resize.bind(this));\r\n        this.resize();\r\n        this.draws = {};\r\n        //todo pause request\r\n        requestAnimationFrame(this.gameloop.bind(this));\r\n    }\r\n    gameloop() {\r\n        this.context.clearRect(0, 0, this.getWidth(), this.getHeight());\r\n        for (let i in this.draws) {\r\n            this.draws[i].draw(this.context);\r\n        }\r\n        requestAnimationFrame(this.gameloop.bind(this));\r\n    }\r\n    add(id, draw) {\r\n        this.draws[id] = draw;\r\n    }\r\n    getDraw(id){\r\n        return this.draws[id];\r\n    }\r\n    removeDraw(id){\r\n        delete this.draws[id];\r\n    }\r\n    clear(){\r\n        this.draws = {};\r\n    }\r\n    resize() {\r\n        this.canvas.width = this.getWidth();\r\n        this.canvas.height = this.getHeight();\r\n    }\r\n    getWidth() {\r\n        return this.container.clientWidth;\r\n\r\n    }\r\n    getHeight() {\r\n        return this.container.clientHeight;\r\n    }\r\n    getCenter() {\r\n        return {\r\n            x: this.getWidth() / 2,\r\n            y: this.this.getHeight() / 2,\r\n        }\r\n    }\r\n}","export default class Geometry {\r\n    constructor(){\r\n        \r\n    }\r\n    static round10(n) {\r\n        var round = Math.round(n * 100) / 100;\r\n        if (round <= 0.1 && round >= -0.1) {\r\n            return 0;\r\n        } else {\r\n            return round;\r\n        }\r\n    }\r\n};\r\n","import Geometry from './Geometry';\r\n\r\n\r\nexport default class Point extends Geometry {\r\n    \r\n    constructor(x, y) {\r\n        super();\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.classType = \"Point\";\r\n        this.speed = 1;\r\n        this.targetPosition = {x:x,y:y};\r\n    }\r\n    setTargetPosition(x,y){\r\n        this.targetPosition = {x:x,y:y};\r\n    }\r\n    moveToTarget() {\r\n        var vec = new Vector(this.targetPosition.x - this.x, this.targetPosition.y - this.y);\r\n        if(vec.getLength() > this.speed){\r\n            vec.setLength(this.speed);\r\n            this.translate(vec.x, vec.y);\r\n        }\r\n    }\r\n    getObject() {\r\n        return {\r\n            x: this.x,\r\n            y: this.y\r\n        }\r\n    }\r\n    translate(x, y) {\r\n        this.x += x;\r\n        this.y += y;\r\n    }\r\n    add(p) {\r\n        this.translate(p.x, p.y);\r\n    }\r\n    soustract(p) {\r\n        this.translate(- p.x, - p.y);\r\n    }\r\n    divide(p) {\r\n        this.x /= p.x;\r\n        this.y /= p.y;\r\n    }\r\n    multiply(p) {\r\n        this.x *= p.x;\r\n        this.y *= p.y;\r\n    }\r\n    angleTo(p) {\r\n        return Math.atan2(p.y - this.y, p.x - this.x);\r\n    }\r\n    distanceTo(p) {\r\n        var dx = p.x - this.x,\r\n            dy = p.y - this.y;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n    signTo(p1, p2) {\r\n        return (this.x - p2.x) * (p1.y - p2.y) - (p1.x - p2.x) * (this.y - p2.y);\r\n    }\r\n    inTriangle(p1, p2, p3, strict) {\r\n        let b1, b2, b3;\r\n        if (strict) {\r\n            b1 = this.signTo(p1, p2) < 0;\r\n            b2 = this.signTo(p2, p3) < 0;\r\n            b3 = this.signTo(p3, p1) < 0;\r\n        } else {\r\n            b1 = this.signTo(p1, p2) <= 0;\r\n            b2 = this.signTo(p2, p3) <= 0;\r\n            b3 = this.signTo(p3, p1) <= 0;\r\n        }\r\n        return ((b1 == b2) && (b2 == b3));\r\n    }\r\n}\r\n","import Vector from './Vector';\r\nexport default class Sprite {\r\n    constructor(url, urlImage) {\r\n        this.ext = url.substr(url.lastIndexOf('.') + 1);\r\n        this.content = {};\r\n        this.animations = {\r\n            \"default\": {\r\n                frames: [0],\r\n                speed: 1,\r\n                loop: false\r\n            }\r\n        };\r\n        this.playing = \"default\";\r\n        this.countFrames = 0;\r\n        this.position = new Point();\r\n        this.current = 0;\r\n        this.iteration = 0;\r\n        this.inverse = false;\r\n        this.velocity = new Vector();\r\n        if (this.ext == 'json') {\r\n            this.loadJson(url, urlImage);\r\n        } else if (url) {\r\n            this.addFrame(url, 0);\r\n        }\r\n        this.maxWidth = 0;\r\n        this.maxHeight = 0;\r\n        this.minOffsetX = null;\r\n        this.minOffsetY = null;\r\n    }\r\n    playAnimation(name, speed, loop) {\r\n        this.iteration = 0;\r\n        this.playing = name;\r\n        this.animations[name].speed = speed || 5;\r\n        this.animations[name].loop = loop || false;\r\n    }\r\n    addAnimation(name, frames) {\r\n        this.animations[name] = {\r\n            speed: 5,\r\n            frames: frames,\r\n            loop: true\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param {CanvasRenderingContext2D} ctx \r\n     */\r\n    draw(ctx) {\r\n        if (this.animations[this.playing] && this.animations[this.playing].speed < this.countFrames) {\r\n\r\n            this.current = this.animations[this.playing].frames[this.iteration];\r\n\r\n            this.iteration++;\r\n            if (this.iteration >= this.animations[this.playing].frames.length) {\r\n\r\n                if (this.animations[this.playing].loop) {\r\n                    this.iteration = 0;\r\n                } else {\r\n                    this.iteration = this.animations[this.playing].frames.length - 1;\r\n                }\r\n            }\r\n\r\n            this.countFrames = 0;\r\n        }\r\n        if (this.content[this.current] && this.content[this.current].ready) {\r\n            ctx.save();\r\n            if (this.inverse) {\r\n                ctx.translate(this.maxWidth / 2, 0);\r\n                ctx.scale(-1, 1);\r\n            }\r\n            if (this.ext == 'json') {\r\n\r\n                ctx.drawImage(\r\n                    this.content[this.current].img,\r\n                    this.content[this.current].x,\r\n                    this.content[this.current].y,\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height,\r\n                    this.position.x + this.content[this.current].offsetX - this.maxWidth / 2,\r\n                    this.position.y + this.content[this.current].offsetY - (this.maxHeight + 22),\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height\r\n                );\r\n            }else{\r\n                ctx.drawImage(\r\n                    this.content[this.current].img,\r\n                    this.position.x,\r\n                    this.position.y\r\n                );\r\n                \r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n        this.countFrames++;\r\n        this.position.add(this.velocity);\r\n    }\r\n    loadJson(url, urlImage) {\r\n        fetch(url)\r\n            .then(function (res) {\r\n                return res.json();\r\n            })\r\n            .then(function (json) {\r\n                let frames = json.frames;\r\n                for (let i in frames) {\r\n                    this.addFrame(\r\n                        urlImage,\r\n                        Object.keys(this.content).length,\r\n                        frames[i].frame.x,\r\n                        frames[i].frame.y,\r\n                        frames[i].frame.w,\r\n                        frames[i].frame.h,\r\n                        frames[i].spriteSourceSize.x,\r\n                        frames[i].spriteSourceSize.y\r\n                    )\r\n                }\r\n            }.bind(this));\r\n    }\r\n    addFrame(url, position, srcX, srcY, srcWidth, srcHeight, offsetX, offsetY) {\r\n        if (this.maxWidth < srcWidth) {\r\n            this.maxWidth = srcWidth;\r\n        }\r\n        if (this.maxHeight < srcHeight) {\r\n            this.maxHeight = srcHeight;\r\n        }\r\n        if (this.minOffsetX == null || this.minOffsetX > offsetX) {\r\n            this.minOffsetX = offsetX;\r\n        }\r\n        if (this.minOffsetY == null || this.minOffsetY > offsetY) {\r\n            this.minOffsetY = offsetY;\r\n        }\r\n        let img = new Image();\r\n        this.content[position] = {\r\n            url: url,\r\n            ready: false\r\n        };\r\n        img.onload = function () {\r\n            this.content[position].img = img;\r\n            this.content[position].width = srcWidth || img.width;\r\n            this.content[position].height = srcHeight || img.height;\r\n            this.content[position].x = srcX || 0;\r\n            this.content[position].y = srcY || 0;\r\n            this.content[position].offsetX = offsetX || 0;\r\n            this.content[position].offsetY = offsetY || 0;\r\n            this.content[position].ready = true;\r\n\r\n        }.bind(this);\r\n        img.src = url;\r\n    }\r\n}","import Sprite from './Sprite';\r\nexport default class Tile extends Sprite {\r\n    constructor(url, urlImage) {\r\n        super(url, urlImage)\r\n    }\r\n    /**\r\n * \r\n * @param {CanvasRenderingContext2D} ctx \r\n */\r\n    draw(ctx) {\r\n        if (this.animations[this.playing] && this.animations[this.playing].speed < this.countFrames) {\r\n\r\n            this.current = this.animations[this.playing].frames[this.iteration];\r\n\r\n            this.iteration++;\r\n            if (this.iteration >= this.animations[this.playing].frames.length) {\r\n\r\n                if (this.animations[this.playing].loop) {\r\n                    this.iteration = 0;\r\n                } else {\r\n                    this.iteration = this.animations[this.playing].frames.length - 1;\r\n                }\r\n            }\r\n\r\n            this.countFrames = 0;\r\n        }\r\n        if (this.content[this.current] && this.content[this.current].ready) {\r\n            ctx.save();\r\n            if (this.inverse) {\r\n                ctx.translate(this.maxWidth / 2, 0);\r\n                ctx.scale(-1, 1);\r\n            }\r\n            if (this.ext == 'json') {\r\n\r\n                ctx.drawImage(\r\n                    this.content[this.current].img,\r\n                    this.content[this.current].x,\r\n                    this.content[this.current].y,\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height,\r\n                    this.position.x + this.content[this.current].offsetX - this.maxWidth / 2,\r\n                    this.position.y + this.content[this.current].offsetY - (this.maxHeight + 22),\r\n                    this.content[this.current].width,\r\n                    this.content[this.current].height\r\n                );\r\n            } else {\r\n             \r\n                var pattern = ctx.createPattern(this.content[this.current].img, 'repeat');\r\n                ctx.fillStyle = pattern;\r\n                ctx.translate(this.position.x,this.position.y);\r\n                ctx.fillRect(-this.position.x,-this.position.y,ctx.canvas.width,ctx.canvas.height);\r\n                ctx.translate(-this.position.x, -this.position.y);\r\n\r\n            }\r\n            ctx.restore();\r\n        }\r\n        this.countFrames++;\r\n        this.position.add(this.velocity);\r\n    }\r\n}","import Point from './Point';\r\nexport default class Vector extends Point {\r\n    constructor(x, y) {\r\n        super(x,y);\r\n        this.update();\r\n    }\r\n    update(){\r\n        this.length = this.getLength();\r\n        this.angle = this.getAngle();\r\n    }\r\n    setX(x){\r\n        this.x = x;\r\n        this.update();\r\n    }\r\n    setY(y){\r\n        this.y = y;\r\n        this.update();\r\n    }\r\n    getAngle(){\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n    setAngle(angle){\r\n\t\tvar length = this.getLength();\r\n\t\tthis.x = Math.cos(angle) * length;\r\n        this.y = Math.sin(angle) * length;\r\n        this.update();\r\n    }\r\n    getLength(){\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    }\r\n    setLength(length){\r\n\t\tvar angle = this.getAngle();\r\n\t\tthis.x = Math.cos(angle) * length;\r\n        this.y = Math.sin(angle) * length;\r\n        this.update();\r\n    }\r\n}","/// <reference path=\"../../node_modules/phaser-ce/typescript/phaser.d.ts\" />\r\n\r\nimport Geometry from './Geometry';\r\nwindow.Geometry = Geometry;\r\nimport Point from './Point';\r\nwindow.Point = Point;\r\nimport Circle from './Circle';\r\nwindow.Circle = Circle;\r\nimport Sprite from './Sprite';\r\nwindow.Sprite = Sprite;\r\nimport Tile from './Tile';\r\nwindow.Tile = Tile;\r\nimport Vector from './Vector';\r\nwindow.Vector = Vector;\r\nimport Game from './Game';\r\nwindow.Game = Game;"]}